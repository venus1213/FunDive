{"openapi":"3.0.0","info":{"title":"FUNDIVE API","version":"0.0.1","description":"FUNDIVE APIドキュメント","license":{"name":"Private"}},"servers":[{"url":"http://localhost:8000","description":"開発環境"}],"tags":[{"name":"Auth","description":"認証関連"},{"name":"Projects","description":"プロジェクト管理"},{"name":"Messages","description":"メッセージング"},{"name":"Subscriptions","description":"サブスクリプション管理"},{"name":"Admin","description":"管理者機能"},{"name":"Profile","description":"プロフィール管理"},{"name":"Bookmarks","description":"ブックマーク管理に関するエンドポイント"},{"name":"DirectMessages","description":"ダイレクトメッセージに関するエンドポイント"},{"name":"Notifications","description":"通知管理に関するエンドポイント"},{"name":"Profiles","description":"プロフィール管理に関するエンドポイント"},{"name":"ProjectMessages","description":"プロジェクトメッセージに関するエンドポイント"}],"components":{"securitySchemes":{"cookieAuth":{"type":"apiKey","in":"cookie","name":"accessToken","description":"アクセストークン（JWT）をクッキーで送信"}},"schemas":{"ValidationError":{"type":"object","properties":{"message":{"type":"string","description":"バリデーションエラーメッセージ"},"errors":{"type":"array","items":{"type":"object","properties":{"field":{"type":"string","description":"エラーが発生したフィールド"},"message":{"type":"string","description":"エラーの詳細メッセージ"}}}}}},"Error":{"type":"object","properties":{"error":{"type":"object","properties":{"type":{"type":"string","enum":["VALIDATION_ERROR","AUTHENTICATION_ERROR","AUTHORIZATION_ERROR","RATE_LIMIT_EXCEEDED","RESOURCE_NOT_FOUND","PLAN_LIMIT_EXCEEDED","INTERNAL_SERVER_ERROR","SUBSCRIPTION_ERROR","PAYMENT_ERROR","DATABASE_ERROR"],"description":"エラータイプ"},"message":{"type":"string","description":"エラーメッセージ"},"details":{"type":"object","description":"エラーの詳細情報（開発環境のみ）"}}}}},"PlanLimits":{"type":"object","properties":{"free":{"type":"object","properties":{"maxProjects":{"type":"integer","example":1},"canSendMessages":{"type":"boolean","example":false}}},"standard":{"type":"object","properties":{"maxProjects":{"type":"integer","example":3},"canSendMessages":{"type":"boolean","example":true}}},"premium":{"type":"object","properties":{"maxProjects":{"type":"integer","example":-1},"canSendMessages":{"type":"boolean","example":true}}}}},"User":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"role":{"type":"string","enum":["entrepreneur","investor","admin"]},"planType":{"type":"string","enum":["free","standard","premium"]},"isAdmin":{"type":"boolean"},"isVerified":{"type":"boolean"},"profile":{"$ref":"#/components/schemas/Profile"}}},"Profile":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"name":{"type":"string"},"displayName":{"type":"string"},"bio":{"type":"string"},"company":{"type":"string"},"position":{"type":"string"},"location":{"type":"string"},"website":{"type":"string"},"social_links":{"type":"object","properties":{"twitter":{"type":"string"},"linkedin":{"type":"string"},"facebook":{"type":"string"}}},"skills":{"type":"array","items":{"type":"string"}},"interests":{"type":"array","items":{"type":"string"}},"is_public":{"type":"boolean"},"visible_fields":{"type":"array","items":{"type":"string","enum":["bio","company","position","location","website","social_links","skills","interests"]}},"profile_image_url":{"type":"string"}}},"Project":{"type":"object","required":["title","description","category","projectType"],"properties":{"id":{"type":"string","description":"プロジェクトID"},"title":{"type":"string","minLength":5,"maxLength":200,"description":"プロジェクトタイトル"},"description":{"type":"string","minLength":20,"maxLength":5000,"description":"プロジェクトの説明"},"category":{"type":"string","enum":["tech","finance","retail","healthcare","education","other"],"description":"プロジェクトカテゴリ"},"projectType":{"type":"string","enum":["entrepreneur","investor","cofounder"],"description":"プロジェクトタイプ"},"status":{"type":"string","enum":["draft","active","closed","suspended"],"description":"プロジェクトステータス"},"investmentAmount":{"type":"number","minimum":0,"maximum":1000000000,"description":"投資額（0-10億円）"},"location":{"type":"string","maxLength":100,"description":"プロジェクトの場所"},"projectStage":{"type":"string","enum":["idea","mvp","early_stage","growth","mature"],"description":"プロジェクトステージ"},"userId":{"type":"string","description":"プロジェクト作成者のID"},"createdAt":{"type":"string","format":"date-time","description":"作成日時"},"updatedAt":{"type":"string","format":"date-time","description":"更新日時"}}},"Subscription":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"planType":{"type":"string","enum":["free","standard","premium"]},"status":{"type":"string","enum":["active","canceled","past_due","unpaid"]},"currentPeriodStart":{"type":"string","format":"date-time"},"currentPeriodEnd":{"type":"string","format":"date-time"},"cancelAtPeriodEnd":{"type":"boolean"},"stripeSubscriptionId":{"type":"string"},"stripeCustomerId":{"type":"string"}}}},"parameters":{"pageParam":{"in":"query","name":"page","schema":{"type":"integer","default":1,"minimum":1},"description":"ページ番号"},"limitParam":{"in":"query","name":"limit","schema":{"type":"integer","default":10,"minimum":1,"maximum":100},"description":"1ページあたりの件数"}},"responses":{"ValidationErrorResponse":{"description":"バリデーションエラー","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationError"},"example":{"message":"バリデーションエラー","errors":[{"field":"email","message":"有効なメールアドレスを入力してください"},{"field":"password","message":"パスワードは8文字以上である必要があります"}]}}}},"UnauthorizedError":{"description":"認証エラー","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"error":{"type":"AUTHENTICATION_ERROR","message":"認証が必要です"}}}}},"RateLimitError":{"description":"レート制限エラー","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"error":{"type":"RATE_LIMIT_EXCEEDED","message":"リクエスト回数が制限を超えました。15分後に再度お試しください。"}}}}},"PlanLimitError":{"description":"プラン制限エラー","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"error":{"type":"PLAN_LIMIT_EXCEEDED","message":"この機能を利用するにはプランのアップグレードが必要です。"}}}}}}},"security":[{"cookieAuth":[]}],"paths":{"/admin/users":{"get":{"summary":"ユーザー一覧の取得","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"1ページあたりの件数"},{"in":"query","name":"role","schema":{"type":"string","enum":["entrepreneur","investor","admin"]},"description":"ユーザーロールでフィルタリング"},{"in":"query","name":"status","schema":{"type":"string","enum":["active","suspended","deleted"]},"description":"ユーザーステータスでフィルタリング"}],"responses":{"200":{"description":"ユーザー一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/User"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"}}}},"/admin/users/{userId}":{"get":{"summary":"ユーザー詳細情報の取得","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string","format":"uuid"},"description":"ユーザーID"}],"responses":{"200":{"description":"ユーザー詳細情報の取得成功","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/User"},{"type":"object","properties":{"profile":{"$ref":"#/components/schemas/Profile"},"subscription":{"$ref":"#/components/schemas/Subscription"}}}]}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"ユーザーが見つかりません"}}}},"/admin/users/{userId}/status":{"patch":{"summary":"ユーザーステータスの更新","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string","format":"uuid"},"description":"ユーザーID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["active","suspended"],"description":"新しいステータス"},"reason":{"type":"string","description":"ステータス変更の理由"}}}}}},"responses":{"200":{"description":"ユーザーステータスの更新成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"ユーザーステータスを更新しました"}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"ユーザーが見つかりません"}}}},"/admin/projects":{"get":{"summary":"プロジェクト一覧の取得","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"1ページあたりの件数"},{"in":"query","name":"status","schema":{"type":"string","enum":["draft","active","closed","suspended"]},"description":"プロジェクトステータスでフィルタリング"}],"responses":{"200":{"description":"プロジェクト一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"projects":{"type":"array","items":{"$ref":"#/components/schemas/Project"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"}}}},"/admin/projects/{projectId}":{"get":{"summary":"プロジェクト詳細情報の取得","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"projectId","required":true,"schema":{"type":"string","format":"uuid"},"description":"プロジェクトID"}],"responses":{"200":{"description":"プロジェクト詳細情報の取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"プロジェクトが見つかりません"}}}},"/admin/projects/{projectId}/status":{"patch":{"summary":"プロジェクトステータスの更新","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"projectId","required":true,"schema":{"type":"string","format":"uuid"},"description":"プロジェクトID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["active","suspended"],"description":"新しいステータス"},"reason":{"type":"string","description":"ステータス変更の理由"}}}}}},"responses":{"200":{"description":"プロジェクトステータスの更新成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"プロジェクトステータスを更新しました"}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"プロジェクトが見つかりません"}}}},"/admin/reports":{"get":{"summary":"通報一覧の取得","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"1ページあたりの件数"},{"in":"query","name":"status","schema":{"type":"string","enum":["pending","resolved","rejected"]},"description":"通報ステータスでフィルタリング"}],"responses":{"200":{"description":"通報一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"reports":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"reporterId":{"type":"string","format":"uuid"},"targetType":{"type":"string","enum":["user","project","message"]},"targetId":{"type":"string","format":"uuid"},"reason":{"type":"string"},"description":{"type":"string"},"status":{"type":"string","enum":["pending","resolved","rejected"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"}}}},"/admin/reports/{reportId}":{"get":{"summary":"通報詳細の取得","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"reportId","required":true,"schema":{"type":"string","format":"uuid"},"description":"通報ID"}],"responses":{"200":{"description":"通報詳細の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"reporterId":{"type":"string","format":"uuid"},"reporter":{"$ref":"#/components/schemas/User"},"targetType":{"type":"string","enum":["user","project","message"]},"targetId":{"type":"string","format":"uuid"},"target":{"oneOf":[{"$ref":"#/components/schemas/User"},{"$ref":"#/components/schemas/Project"}]},"reason":{"type":"string"},"description":{"type":"string"},"status":{"type":"string","enum":["pending","resolved","rejected"]},"adminNotes":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"通報が見つかりません"}}}},"/admin/reports/{reportId}/status":{"patch":{"summary":"通報ステータスの更新","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"reportId","required":true,"schema":{"type":"string","format":"uuid"},"description":"通報ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["resolved","rejected"],"description":"新しいステータス"},"adminNotes":{"type":"string","description":"管理者のメモ"}}}}}},"responses":{"200":{"description":"通報ステータスの更新成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"通報ステータスを更新しました"}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"通報が見つかりません"}}}},"/admin/register/{userId}":{"post":{"summary":"管理者権限の付与","tags":["Admin"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string","format":"uuid"},"description":"管理者権限を付与するユーザーID"}],"responses":{"200":{"description":"管理者権限の付与成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"管理者権限を付与しました"}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"ユーザーが見つかりません"}}}},"/auth/register":{"post":{"summary":"新規ユーザー登録","tags":["Auth"],"description":"新規ユーザーを登録します。\n\nテスト用のIDトークンを取得するには、以下のエンドポイントを使用してください：\n```\nPOST /auth/test-token\n{\n  \"email\": \"test@example.com\"\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","name","idToken"],"properties":{"email":{"type":"string","format":"email","description":"ユーザーのメールアドレス"},"name":{"type":"string","description":"ユーザーの表示名"},"role":{"type":"string","enum":["entrepreneur","investor"],"description":"ユーザーの役割"},"selectedPlan":{"type":"string","enum":["free","standard","premium"],"description":"選択したプラン"},"selectedCycle":{"type":"string","enum":["月額","年額"],"description":"課金サイクル"},"idToken":{"type":"string","description":"FirebaseのIDトークン"}}}}}},"responses":{"201":{"description":"ユーザー登録成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"アカウントを作成しました"},"user":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"name":{"type":"string"},"role":{"type":"string"},"isVerified":{"type":"boolean"}}}}}}}},"400":{"$ref":"#/components/responses/ValidationErrorResponse"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"429":{"$ref":"#/components/responses/RateLimitError"}}}},"/auth/login":{"post":{"summary":"ログイン","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","idToken"],"properties":{"email":{"type":"string","format":"email","description":"メールアドレス"},"idToken":{"type":"string","description":"Firebase認証トークン"},"displayName":{"type":"string","description":"表示名（オプション）"}}}}}},"responses":{"200":{"description":"ログイン成功","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"isVerified":{"type":"boolean"},"profile":{"type":"object"}}}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"429":{"$ref":"#/components/responses/RateLimitError"}}}},"/auth/test-token":{"post":{"summary":"テスト用のIDトークンを生成","tags":["Auth"],"description":"開発環境でのテスト用にIDトークンを生成します","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email"],"properties":{"email":{"type":"string","format":"email","description":"テストユーザーのメールアドレス"}}}}}},"responses":{"200":{"description":"テストトークン生成成功","content":{"application/json":{"schema":{"type":"object","properties":{"idToken":{"type":"string","description":"生成されたIDトークン"}}}}}}}}},"/auth/logout":{"post":{"summary":"ログアウト","tags":["Auth"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"ログアウト成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"ログアウトしました"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}}},"/auth/me":{"get":{"summary":"現在のユーザー情報を取得","tags":["Auth"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"ユーザー情報の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}}},"/bookmarks":{"post":{"summary":"プロジェクトをブックマークに追加","tags":["Bookmarks"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["projectId"],"properties":{"projectId":{"type":"string","format":"uuid","description":"ブックマークするプロジェクトのID"}}}}}},"responses":{"201":{"description":"ブックマーク追加成功","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"projectId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"}}}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"},"404":{"description":"プロジェクトが見つかりません"},"409":{"description":"すでにブックマーク済みです"}}}},"/bookmarks/{projectId}":{"delete":{"summary":"ブックマークを削除","tags":["Bookmarks"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"projectId","required":true,"schema":{"type":"string","format":"uuid"},"description":"削除するブックマークのプロジェクトID"}],"responses":{"200":{"description":"ブックマーク削除成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"ブックマークを削除しました"}}}}}},"401":{"description":"認証エラー"},"404":{"description":"ブックマークが見つかりません"}}}},"/bookmarks/user":{"get":{"summary":"ユーザーのブックマーク一覧を取得","tags":["Bookmarks"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"1ページあたりの件数"}],"responses":{"200":{"description":"ブックマーク一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"bookmarks":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"projectId":{"type":"string","format":"uuid"},"project":{"$ref":"#/components/schemas/Project"},"createdAt":{"type":"string","format":"date-time"}}}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"}}}},"/direct-messages":{"post":{"summary":"ダイレクトメッセージの送信","tags":["DirectMessages"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["receiverId","content"],"properties":{"receiverId":{"type":"string","format":"uuid","description":"受信者のユーザーID"},"content":{"type":"string","minLength":1,"maxLength":2000,"description":"メッセージの内容"}}}}}},"responses":{"201":{"description":"メッセージ送信成功","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"senderId":{"type":"string","format":"uuid"},"receiverId":{"type":"string","format":"uuid"},"content":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"},"403":{"description":"メッセージ送信制限に達しました"}}}},"/direct-messages/stats":{"get":{"summary":"ダイレクトメッセージの統計情報を取得","tags":["DirectMessages"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"ダイレクトメッセージの統計情報の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"integer","description":"全メッセージ数"},"unread":{"type":"integer","description":"未読メッセージ数"}}}}}},"401":{"description":"認証エラー"}}}},"/direct-messages/conversations":{"get":{"summary":"メッセージのある会話一覧を取得","tags":["DirectMessages"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"会話一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"conversations":{"type":"array","items":{"type":"object","properties":{"userId":{"type":"string","format":"uuid","description":"会話相手のユーザーID"},"userName":{"type":"string","description":"会話相手のユーザー名"},"lastMessage":{"type":"object","properties":{"content":{"type":"string","description":"最後のメッセージ内容"},"createdAt":{"type":"string","format":"date-time","description":"最後のメッセージの送信日時"}}},"unreadCount":{"type":"integer","description":"未読メッセージ数"}}}}}}}}},"401":{"description":"認証エラー"}}}},"/direct-messages/{userId}":{"get":{"summary":"特定のユーザーとのメッセージ履歴を取得","tags":["DirectMessages"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string","format":"uuid"},"description":"メッセージ履歴を取得したいユーザーのID"},{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"1ページあたりのメッセージ数"}],"responses":{"200":{"description":"メッセージ履歴の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"messages":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"senderId":{"type":"string","format":"uuid"},"receiverId":{"type":"string","format":"uuid"},"content":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"}}}},"/notifications":{"get":{"summary":"通知一覧の取得","tags":["Notifications"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"1ページあたりの通知数"},{"in":"query","name":"unreadOnly","schema":{"type":"boolean","default":false},"description":"未読の通知のみを取得"}],"responses":{"200":{"description":"通知一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"notifications":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"type":{"type":"string","enum":["message","project_update","bookmark","subscription"]},"title":{"type":"string"},"content":{"type":"string"},"isRead":{"type":"boolean"},"relatedId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"}}}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"}}}},"/notifications/{notificationId}/read":{"put":{"summary":"特定の通知を既読にする","tags":["Notifications"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"notificationId","required":true,"schema":{"type":"string","format":"uuid"},"description":"既読にする通知のID"}],"responses":{"200":{"description":"通知の既読化成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"通知を既読にしました"}}}}}},"401":{"description":"認証エラー"},"404":{"description":"通知が見つかりません"}}}},"/notifications/read-all":{"put":{"summary":"すべての通知を既読にする","tags":["Notifications"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"全通知の既読化成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"すべての通知を既読にしました"}}}}}},"401":{"description":"認証エラー"}}}},"/notifications/settings":{"get":{"summary":"通知設定の取得","tags":["Notifications"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"通知設定の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"emailNotifications":{"type":"object","properties":{"enabled":{"type":"boolean"},"frequency":{"type":"string","enum":["immediate","daily","weekly"]},"types":{"type":"array","items":{"type":"string","enum":["message","project_update","bookmark","subscription"]}}}},"pushNotifications":{"type":"object","properties":{"enabled":{"type":"boolean"},"types":{"type":"array","items":{"type":"string","enum":["message","project_update","bookmark","subscription"]}}}},"notificationPreferences":{"type":"object","properties":{"minimumPriority":{"type":"string","enum":["low","medium","high","urgent"]}}}}}}}},"401":{"description":"認証エラー"}}},"put":{"summary":"通知設定の更新","tags":["Notifications"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["emailNotifications","pushNotifications","notificationPreferences"],"properties":{"emailNotifications":{"type":"object","required":["enabled","frequency","types"],"properties":{"enabled":{"type":"boolean"},"frequency":{"type":"string","enum":["immediate","daily","weekly"]},"types":{"type":"array","items":{"type":"string","enum":["message","project_update","bookmark","subscription"]}}}},"pushNotifications":{"type":"object","required":["enabled","types"],"properties":{"enabled":{"type":"boolean"},"types":{"type":"array","items":{"type":"string","enum":["message","project_update","bookmark","subscription"]}}}},"notificationPreferences":{"type":"object","required":["minimumPriority"],"properties":{"minimumPriority":{"type":"string","enum":["low","medium","high","urgent"]}}}}}}}},"responses":{"200":{"description":"通知設定の更新成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"通知設定を更新しました"}}}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"}}}},"/profiles/search":{"get":{"summary":"ユーザー検索","tags":["Profiles"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"q","schema":{"type":"string"},"description":"検索キーワード"},{"in":"query","name":"role","schema":{"type":"string","enum":["entrepreneur","investor"]},"description":"ユーザーロールでフィルタリング"}],"responses":{"200":{"description":"検索結果の取得成功"}}}},"/profiles/{userId}":{"get":{"summary":"プロフィール情報の取得","tags":["Profiles"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string","format":"uuid"},"description":"ユーザーID"}],"responses":{"200":{"description":"プロフィール情報の取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Profile"}}}},"401":{"description":"認証エラー"},"404":{"description":"プロフィールが見つかりません"}}}},"/profiles":{"put":{"summary":"プロフィール情報の更新","tags":["Profiles"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","maxLength":100,"example":"山田太郎"},"bio":{"type":"string","maxLength":1000,"example":"テクノロジーとビジネスの両方に興味があります。"},"company":{"type":"string","maxLength":100,"example":"株式会社テック"},"position":{"type":"string","maxLength":100,"example":"CTO"},"location":{"type":"string","maxLength":100,"example":"東京都渋谷区"},"website":{"type":"string","format":"uri","example":"https://example.com"},"social_links":{"type":"object","properties":{"twitter":{"type":"string","example":"https://twitter.com/username"},"linkedin":{"type":"string","example":"https://linkedin.com/in/username"},"facebook":{"type":"string","example":"https://facebook.com/username"}}},"skills":{"type":"array","items":{"type":"string"},"example":["JavaScript","Python","AWS"]},"interests":{"type":"array","items":{"type":"string"},"example":["AI","ブロックチェーン","スタートアップ"]},"profile_image_url":{"type":"string","example":"https://example.com/avatar.png"}}}}}},"responses":{"200":{"description":"プロフィール更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Profile"}}}},"400":{"description":"バリデーションエラー","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationError"}}}},"401":{"description":"認証エラー"}}}},"/profiles/visibility":{"put":{"summary":"プロフィールの公開設定を更新","tags":["Profiles"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["is_public","visible_fields"],"properties":{"is_public":{"type":"boolean","example":true},"visible_fields":{"type":"array","items":{"type":"string","enum":["bio","company","position","location","website","social_links","skills","interests"]},"example":["bio","skills","interests"]}}}}}},"responses":{"200":{"description":"公開設定の更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Profile"}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"}}}},"/project-messages":{"post":{"summary":"プロジェクトメッセージの送信","tags":["ProjectMessages"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["projectId","content"],"properties":{"projectId":{"type":"string","format":"uuid","description":"プロジェクトID"},"content":{"type":"string","minLength":1,"maxLength":2000,"description":"メッセージの内容"}}}}}},"responses":{"201":{"description":"メッセージ送信成功","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"projectId":{"type":"string","format":"uuid"},"senderId":{"type":"string","format":"uuid"},"content":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"},"403":{"description":"メッセージ送信制限に達しました"},"404":{"description":"プロジェクトが見つかりません"}}}},"/project-messages/{projectId}":{"get":{"summary":"プロジェクトのメッセージ履歴を取得","tags":["ProjectMessages"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"projectId","required":true,"schema":{"type":"string","format":"uuid"},"description":"プロジェクトID"},{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"1ページあたりのメッセージ数"}],"responses":{"200":{"description":"メッセージ履歴の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"messages":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"projectId":{"type":"string","format":"uuid"},"senderId":{"type":"string","format":"uuid"},"sender":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"}}},"content":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"},"404":{"description":"プロジェクトが見つかりません"}}}},"/projects":{"post":{"summary":"新規プロジェクトの作成","tags":["Projects"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title","description","category","projectType"],"properties":{"title":{"type":"string","minLength":5,"maxLength":200,"example":"革新的なAIプロジェクト"},"description":{"type":"string","minLength":20,"maxLength":5000,"example":"機械学習を活用して、ビジネスプロセスを自動化する革新的なプロジェクトです。"},"category":{"type":"string","enum":["tech","finance","retail","healthcare","education","other"],"example":"tech"},"projectType":{"type":"string","enum":["entrepreneur","investor","cofounder"],"example":"entrepreneur"},"investmentAmount":{"type":"number","minimum":0,"maximum":1000000000,"example":10000000},"projectStage":{"type":"string","enum":["idea","mvp","early_stage","growth","mature"],"example":"mvp"}}}}}},"responses":{"201":{"description":"プロジェクト作成成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"400":{"description":"バリデーションエラー","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationError"}}}},"401":{"description":"認証エラー"},"403":{"description":"プロジェクト作成の上限に達しています"}}},"get":{"summary":"プロジェクト一覧の取得","tags":["Projects"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"1ページあたりの件数"}],"responses":{"200":{"description":"プロジェクト一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"projects":{"type":"array","items":{"$ref":"#/components/schemas/Project"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"}}}},"/projects/search":{"get":{"summary":"プロジェクトの検索","tags":["Projects"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"q","schema":{"type":"string"},"description":"検索キーワード"},{"in":"query","name":"category","schema":{"type":"string","enum":["tech","finance","retail","healthcare","education","other"]},"description":"カテゴリでフィルタリング"},{"in":"query","name":"projectType","schema":{"type":"string","enum":["entrepreneur","investor","cofounder"]},"description":"プロジェクトタイプでフィルタリング"},{"in":"query","name":"status","schema":{"type":"string","enum":["draft","active","closed","suspended"]},"description":"ステータスでフィルタリング"},{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"1ページあたりの件数"}],"responses":{"200":{"description":"プロジェクト検索結果の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"projects":{"type":"array","items":{"$ref":"#/components/schemas/Project"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"}}}},"/projects/popular":{"get":{"summary":"人気のプロジェクト一覧を取得","tags":["Projects"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":3},"description":"取得する件数"}],"responses":{"200":{"description":"人気プロジェクト一覧の取得成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Project"}}}}}}}},"/projects/stats":{"get":{"summary":"プロジェクトの統計情報を取得","tags":["Projects"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"プロジェクトの統計情報の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"integer","description":"全プロジェクト数"},"weeklyIncrease":{"type":"integer","description":"先週からの増加数"}}}}}},"401":{"description":"認証エラー"}}}},"/projects/my":{"get":{"summary":"自分のプロジェクト一覧を取得","tags":["Projects"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"ページ番号"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":10},"description":"1ページあたりの件数"}],"responses":{"200":{"description":"自分のプロジェクト一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"projects":{"type":"array","items":{"$ref":"#/components/schemas/Project"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}},"401":{"description":"認証エラー"}}}},"/projects/{id}":{"get":{"summary":"プロジェクト詳細の取得","tags":["Projects"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"プロジェクトID"}],"responses":{"200":{"description":"プロジェクト詳細の取得成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"401":{"description":"認証エラー"},"404":{"description":"プロジェクトが見つかりません"}}},"put":{"summary":"プロジェクトの更新","tags":["Projects"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"プロジェクトID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","minLength":5,"maxLength":200},"description":{"type":"string","minLength":20,"maxLength":5000},"category":{"type":"string","enum":["tech","finance","retail","healthcare","education","other"]},"projectType":{"type":"string","enum":["entrepreneur","investor","cofounder"]},"status":{"type":"string","enum":["draft","active","closed","suspended"]},"investmentAmount":{"type":"number","minimum":0,"maximum":1000000000},"location":{"type":"string","maxLength":100},"projectStage":{"type":"string","enum":["idea","mvp","early_stage","growth","mature"]}}}}}},"responses":{"200":{"description":"プロジェクト更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"},"403":{"description":"更新権限がありません"},"404":{"description":"プロジェクトが見つかりません"}}},"delete":{"summary":"プロジェクトの削除","tags":["Projects"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"プロジェクトID"}],"responses":{"200":{"description":"プロジェクト削除成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"プロジェクトを削除しました"}}}}}},"401":{"description":"認証エラー"},"403":{"description":"削除権限がありません"},"404":{"description":"プロジェクトが見つかりません"}}}},"/subscriptions/plans":{"get":{"summary":"利用可能なプラン一覧の取得","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"プラン一覧の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"plans":{"type":"array","items":{"type":"object","properties":{"priceId":{"type":"string","description":"Stripe価格ID"},"productId":{"type":"string","description":"Stripe商品ID"},"name":{"type":"string","description":"プラン名"},"description":{"type":"string","description":"プランの説明"},"amount":{"type":"number","description":"価格（円）"},"currency":{"type":"string","description":"通貨"},"interval":{"type":"string","enum":["month","year"],"description":"課金間隔"}}}}}}}}},"401":{"description":"認証エラー"}}}},"/subscriptions/subscribe":{"post":{"summary":"新規サブスクリプション登録","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["priceId"],"properties":{"priceId":{"type":"string","description":"Stripe価格ID"}}}}}},"responses":{"200":{"description":"サブスクリプション登録成功","content":{"application/json":{"schema":{"type":"object","properties":{"sessionId":{"type":"string","description":"Stripeチェックアウトセッションのセッションid"},"url":{"type":"string","description":"チェックアウトページのURL"}}}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"}}}},"/subscriptions/info":{"get":{"summary":"サブスクリプション情報の取得","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"サブスクリプション情報の取得成功","content":{"application/json":{"schema":{"type":"object","properties":{"subscription":{"$ref":"#/components/schemas/Subscription"}}}}}},"401":{"description":"認証エラー"}}}},"/subscriptions/history/{userId}":{"get":{"summary":"購入履歴の取得","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string"},"description":"ユーザーID"}],"responses":{"200":{"description":"購入履歴の取得成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Subscription"}}}}},"401":{"description":"認証エラー"},"404":{"description":"ユーザーが見つかりません"}}}},"/subscriptions/change-plan":{"post":{"summary":"サブスクリプションのプラン変更","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["priceId"],"properties":{"priceId":{"type":"string","description":"新しいプランのStripe価格ID"}}}}}},"responses":{"200":{"description":"プラン変更セッションの作成成功","content":{"application/json":{"schema":{"type":"object","properties":{"sessionId":{"type":"string","description":"Stripeチェックアウトセッションのセッションid"}}}}}},"400":{"description":"バリデーションエラー"},"401":{"description":"認証エラー"},"404":{"description":"サブスクリプションが見つかりません"}}}},"/subscriptions/create-portal-session":{"post":{"summary":"Stripeカスタマーポータルセッションの作成","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"ポータルセッションの作成成功","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string","description":"カスタマーポータルのURL"}}}}}},"401":{"description":"認証エラー"},"404":{"description":"サブスクリプションが見つかりません"}}}},"/subscriptions/admin/sync/{userId}":{"post":{"summary":"管理者用：サブスクリプション情報の手動同期","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string","format":"uuid"},"description":"同期対象のユーザーID"}],"responses":{"200":{"description":"同期成功","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"サブスクリプション情報を同期しました"},"planType":{"type":"string","enum":["free","standard","premium","startup_partner"]},"subscription":{"type":"object","properties":{"status":{"type":"string"},"currentPeriodEnd":{"type":"string","format":"date-time"},"cancelAtPeriodEnd":{"type":"boolean"}}}}}}}},"401":{"description":"認証エラー"},"403":{"description":"管理者権限がありません"},"404":{"description":"ユーザーが見つかりません"}}}},"/subscriptions/cancel":{"post":{"summary":"サブスクリプションのキャンセル","tags":["Subscriptions"],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"キャンセル成功","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}}}}}},"401":{"description":"認証エラー"},"404":{"description":"サブスクリプションが見つかりません"}}}},"/subscriptions/webhook":{"post":{"summary":"Stripeからのwebhookを処理","tags":["Subscriptions"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"Webhook処理成功","content":{"application/json":{"schema":{"type":"object","properties":{"received":{"type":"boolean"}}}}}},"400":{"description":"Webhook処理失敗","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"code":{"type":"string"},"message":{"type":"string"}}}}}}}}}}}}}